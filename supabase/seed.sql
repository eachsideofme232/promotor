-- PromoHub Seed Data
-- This file seeds the database with initial data for development and demo

-- =============================================================================
-- 1. CHANNELS (Korean e-commerce platforms)
-- =============================================================================
INSERT INTO channels (id, name, slug, color, logo_url, is_active) VALUES
  ('c1000000-0000-0000-0000-000000000001', '올리브영', 'oliveyoung', '#00A651', NULL, true),
  ('c1000000-0000-0000-0000-000000000002', '쿠팡', 'coupang', '#E31937', NULL, true),
  ('c1000000-0000-0000-0000-000000000003', '네이버', 'naver', '#03C75A', NULL, true),
  ('c1000000-0000-0000-0000-000000000004', '카카오', 'kakao', '#FEE500', NULL, true),
  ('c1000000-0000-0000-0000-000000000005', '무신사', 'musinsa', '#000000', NULL, true),
  ('c1000000-0000-0000-0000-000000000006', 'SSG', 'ssg', '#FF5252', NULL, true),
  ('c1000000-0000-0000-0000-000000000007', '롯데ON', 'lotteon', '#E60012', NULL, true),
  ('c1000000-0000-0000-0000-000000000008', '11번가', '11st', '#FF0050', NULL, true)
ON CONFLICT (slug) DO UPDATE SET
  name = EXCLUDED.name,
  color = EXCLUDED.color;

-- =============================================================================
-- 2. DEMO TEAM (for development/demo purposes)
-- Note: This creates a demo team without a real user. In production,
-- users would create their own teams after signing up.
-- =============================================================================
INSERT INTO teams (id, name, slug, logo_url) VALUES
  ('t1000000-0000-0000-0000-000000000001', '뷰티코리아', 'beauty-korea', NULL)
ON CONFLICT (slug) DO NOTHING;

-- =============================================================================
-- 3. DEMO PRODUCTS (sample cosmetic products)
-- =============================================================================
INSERT INTO products (id, team_id, name, sku, brand, category, base_price, is_active) VALUES
  ('p1000000-0000-0000-0000-000000000001', 't1000000-0000-0000-0000-000000000001',
   '하이드레이팅 토너', 'BK-TN-001', '글로우랩', '스킨케어', 28000, true),
  ('p1000000-0000-0000-0000-000000000002', 't1000000-0000-0000-0000-000000000001',
   '비타민C 세럼', 'BK-SR-001', '글로우랩', '스킨케어', 45000, true),
  ('p1000000-0000-0000-0000-000000000003', 't1000000-0000-0000-0000-000000000001',
   '수분 크림', 'BK-CR-001', '글로우랩', '스킨케어', 38000, true),
  ('p1000000-0000-0000-0000-000000000004', 't1000000-0000-0000-0000-000000000001',
   '선크림 SPF50+', 'BK-SN-001', '글로우랩', '선케어', 32000, true),
  ('p1000000-0000-0000-0000-000000000005', 't1000000-0000-0000-0000-000000000001',
   '클렌징 폼', 'BK-CL-001', '글로우랩', '클렌저', 18000, true),
  ('p1000000-0000-0000-0000-000000000006', 't1000000-0000-0000-0000-000000000001',
   '립틴트 로즈', 'BK-LT-001', '컬러팝', '메이크업', 15000, true),
  ('p1000000-0000-0000-0000-000000000007', 't1000000-0000-0000-0000-000000000001',
   '아이라이너', 'BK-EL-001', '컬러팝', '메이크업', 12000, true),
  ('p1000000-0000-0000-0000-000000000008', 't1000000-0000-0000-0000-000000000001',
   '마스카라', 'BK-MC-001', '컬러팝', '메이크업', 18000, true)
ON CONFLICT DO NOTHING;

-- =============================================================================
-- 4. PROMO TEMPLATES (reusable promotion patterns)
-- =============================================================================
INSERT INTO promo_templates (id, team_id, channel_id, name, description, discount_type, discount_value, recurrence_type, default_duration_days, is_active) VALUES
  -- Oliveyoung monthly sale template
  ('pt100000-0000-0000-0000-000000000001', 't1000000-0000-0000-0000-000000000001',
   'c1000000-0000-0000-0000-000000000001', '올리브영 월간 세일',
   '매월 진행되는 올리브영 정기 할인 행사', 'percentage', '20', 'monthly', 7, true),

  -- Coupang rocket delivery promo template
  ('pt100000-0000-0000-0000-000000000002', 't1000000-0000-0000-0000-000000000001',
   'c1000000-0000-0000-0000-000000000002', '쿠팡 로켓배송 특가',
   '로켓배송 상품 특별 할인', 'percentage', '15', NULL, 5, true),

  -- Naver shopping live template
  ('pt100000-0000-0000-0000-000000000003', 't1000000-0000-0000-0000-000000000001',
   'c1000000-0000-0000-0000-000000000003', '네이버 쇼핑라이브',
   '네이버 쇼핑라이브 방송 연계 프로모션', 'coupon', '5000원 쿠폰', NULL, 1, true),

  -- Kakao gift promo template
  ('pt100000-0000-0000-0000-000000000004', 't1000000-0000-0000-0000-000000000001',
   'c1000000-0000-0000-0000-000000000004', '카카오 선물하기 기획전',
   '카카오 선물하기 메인 노출 기획전', 'gift', '미니어처 증정', 'monthly', 14, true),

  -- BOGO template (any channel)
  ('pt100000-0000-0000-0000-000000000005', 't1000000-0000-0000-0000-000000000001',
   NULL, '1+1 행사',
   '1+1 프로모션 템플릿', 'bogo', '1+1', NULL, 3, true)
ON CONFLICT DO NOTHING;

-- =============================================================================
-- 5. SAMPLE PROMOTIONS (for calendar demo)
-- Using dates relative to current month for realistic demo
-- =============================================================================

-- Current month promotions
INSERT INTO promotions (id, team_id, channel_id, template_id, title, description, status, discount_type, discount_value, start_date, end_date, memo) VALUES
  -- Oliveyoung February Sale (current month)
  ('pr100000-0000-0000-0000-000000000001', 't1000000-0000-0000-0000-000000000001',
   'c1000000-0000-0000-0000-000000000001', 'pt100000-0000-0000-0000-000000000001',
   '올리브영 2월 뷰티페스타', '2월 정기 할인 행사 - 스킨케어 라인 20% 할인',
   'active', 'percentage', '20',
   CURRENT_DATE - INTERVAL '3 days', CURRENT_DATE + INTERVAL '4 days',
   '메인 배너 노출 확정'),

  -- Coupang promotion
  ('pr100000-0000-0000-0000-000000000002', 't1000000-0000-0000-0000-000000000001',
   'c1000000-0000-0000-0000-000000000002', 'pt100000-0000-0000-0000-000000000002',
   '쿠팡 로켓배송 특가전', '로켓배송 상품 15% 특별 할인',
   'planned', 'percentage', '15',
   CURRENT_DATE + INTERVAL '7 days', CURRENT_DATE + INTERVAL '12 days',
   '로켓배송 전용 할인'),

  -- Naver shopping live
  ('pr100000-0000-0000-0000-000000000003', 't1000000-0000-0000-0000-000000000001',
   'c1000000-0000-0000-0000-000000000003', 'pt100000-0000-0000-0000-000000000003',
   '네이버 쇼핑라이브 특별 방송', '비타민C 세럼 런칭 기념 라이브 방송',
   'planned', 'coupon', '5000원 쿠폰',
   CURRENT_DATE + INTERVAL '10 days', CURRENT_DATE + INTERVAL '10 days',
   '오후 8시 방송 예정'),

  -- Kakao gift promo
  ('pr100000-0000-0000-0000-000000000004', 't1000000-0000-0000-0000-000000000001',
   'c1000000-0000-0000-0000-000000000004', 'pt100000-0000-0000-0000-000000000004',
   '카카오 발렌타인 기획전', '발렌타인 선물하기 기획전 참여',
   'active', 'gift', '미니 립틴트 증정',
   CURRENT_DATE - INTERVAL '7 days', CURRENT_DATE + INTERVAL '7 days',
   '발렌타인 시즌 메인 노출'),

  -- Musinsa promo
  ('pr100000-0000-0000-0000-000000000005', 't1000000-0000-0000-0000-000000000001',
   'c1000000-0000-0000-0000-000000000005', NULL,
   '무신사 뷰티위크', '무신사 뷰티 카테고리 프로모션',
   'planned', 'percentage', '25',
   CURRENT_DATE + INTERVAL '14 days', CURRENT_DATE + INTERVAL '21 days',
   '뷰티 카테고리 메인 배너'),

  -- SSG flash sale
  ('pr100000-0000-0000-0000-000000000006', 't1000000-0000-0000-0000-000000000001',
   'c1000000-0000-0000-0000-000000000006', NULL,
   'SSG 타임세일', '선크림 타임세일 이벤트',
   'planned', 'percentage', '30',
   CURRENT_DATE + INTERVAL '5 days', CURRENT_DATE + INTERVAL '5 days',
   '오전 10시 타임세일'),

  -- Past promotions (for history)
  ('pr100000-0000-0000-0000-000000000007', 't1000000-0000-0000-0000-000000000001',
   'c1000000-0000-0000-0000-000000000001', 'pt100000-0000-0000-0000-000000000001',
   '올리브영 1월 세일', '1월 정기 할인 행사',
   'ended', 'percentage', '20',
   CURRENT_DATE - INTERVAL '30 days', CURRENT_DATE - INTERVAL '23 days',
   '완료'),

  ('pr100000-0000-0000-0000-000000000008', 't1000000-0000-0000-0000-000000000001',
   'c1000000-0000-0000-0000-000000000002', NULL,
   '쿠팡 신년 특가', '새해 맞이 특별 할인',
   'ended', 'percentage', '25',
   CURRENT_DATE - INTERVAL '45 days', CURRENT_DATE - INTERVAL '38 days',
   '완료 - 목표 달성'),

  -- Cancelled promotion
  ('pr100000-0000-0000-0000-000000000009', 't1000000-0000-0000-0000-000000000001',
   'c1000000-0000-0000-0000-000000000007', NULL,
   '롯데ON 기획전 (취소)', '예정되었으나 취소된 프로모션',
   'cancelled', 'percentage', '15',
   CURRENT_DATE + INTERVAL '20 days', CURRENT_DATE + INTERVAL '27 days',
   '채널 사정으로 취소')
ON CONFLICT DO NOTHING;

-- =============================================================================
-- 6. PROMO-PRODUCTS (link products to promotions)
-- =============================================================================
INSERT INTO promo_products (promotion_id, product_id, promo_price) VALUES
  -- Oliveyoung Feb sale: skincare line
  ('pr100000-0000-0000-0000-000000000001', 'p1000000-0000-0000-0000-000000000001', 22400),  -- 토너 20% off
  ('pr100000-0000-0000-0000-000000000001', 'p1000000-0000-0000-0000-000000000002', 36000),  -- 세럼 20% off
  ('pr100000-0000-0000-0000-000000000001', 'p1000000-0000-0000-0000-000000000003', 30400),  -- 크림 20% off

  -- Coupang rocket: all products
  ('pr100000-0000-0000-0000-000000000002', 'p1000000-0000-0000-0000-000000000001', 23800),
  ('pr100000-0000-0000-0000-000000000002', 'p1000000-0000-0000-0000-000000000002', 38250),
  ('pr100000-0000-0000-0000-000000000002', 'p1000000-0000-0000-0000-000000000004', 27200),

  -- Naver live: vitamin C serum focus
  ('pr100000-0000-0000-0000-000000000003', 'p1000000-0000-0000-0000-000000000002', 40000),

  -- Kakao Valentine: makeup
  ('pr100000-0000-0000-0000-000000000004', 'p1000000-0000-0000-0000-000000000006', NULL),
  ('pr100000-0000-0000-0000-000000000004', 'p1000000-0000-0000-0000-000000000007', NULL),
  ('pr100000-0000-0000-0000-000000000004', 'p1000000-0000-0000-0000-000000000008', NULL)
ON CONFLICT DO NOTHING;

-- =============================================================================
-- NOTES FOR DEVELOPMENT
-- =============================================================================
--
-- To link a real user to the demo team after signup:
--
-- INSERT INTO team_members (team_id, user_id, role)
-- VALUES ('t1000000-0000-0000-0000-000000000001', 'YOUR_USER_ID', 'owner');
--
-- To reset the database with fresh seed data:
-- npx supabase db reset
--
